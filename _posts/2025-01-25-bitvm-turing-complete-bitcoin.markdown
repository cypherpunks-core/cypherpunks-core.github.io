---
layout: post
title: 'BitVM：將圖靈完備計算帶入比特幣'
date: 2025-01-25
categories:
- bitcoin
- bitvm
description: 深入解析 BitVM，一個不需要軟分叉就能在比特幣上實現任意計算驗證的突破性方案。
image: /img/bitvm.svg
published: true
hero_image: /img/hero.png
tags:
- bitcoin
- bitvm
- layer2
- smart-contracts
---

## 前言

2023 年 10 月，Robin Linus 發表了 BitVM 白皮書，提出了一個革命性的概念：**在不改變比特幣協議的情況下，實現任意計算的驗證**。這個突破為比特幣帶來了前所未有的可能性，包括真正去信任的跨鏈橋和比特幣原生 Rollup。

---

## 一、什麼是 BitVM？

### 核心概念

BitVM 不是在比特幣上「執行」複雜計算，而是**驗證**計算是否正確。

**關鍵洞察：**
- 鏈下執行，鏈上驗證
- 使用「樂觀執行」模式
- 通過「欺詐證明」處理爭議

### 類比理解

想像一場數學考試：
- **傳統方式（以太坊）**：所有人一起做每道題
- **BitVM 方式**：一人提交答案，其他人只在發現錯誤時挑戰

這種「挑戰-回應」模式大幅減少了鏈上計算需求。

---

## 二、技術架構

### 參與角色

| 角色 | 功能 |
|------|------|
| **Prover（證明者）** | 聲稱計算結果正確 |
| **Verifier（驗證者）** | 可以挑戰錯誤的計算 |

### 樂觀執行流程

```
1. Prover 提交計算結果
   ↓
2. 設定挑戰期（例如：1週）
   ↓
3a. 無人挑戰 → 結果被接受
3b. 有人挑戰 → 進入爭議解決
```

### 欺詐證明機制

當 Verifier 認為計算錯誤時：

```
# 二分搜尋找到分歧點
步驟1: 驗證前半部分
        ↓
步驟2: 如果正確，驗證後半部分
        ↓
步驟N: 最終找到具體的錯誤步驟
        ↓
鏈上驗證: 比特幣腳本驗證這一步
```

---

## 三、比特幣腳本實現

### 邏輯閘的鏈上表示

BitVM 將計算分解為基本的邏輯閘（NAND 閘可以構建任何邏輯）：

```
# NAND 閘的比特幣腳本實現
OP_IF
  OP_IF
    0  # 1 NAND 1 = 0
  OP_ELSE
    1  # 1 NAND 0 = 1
  OP_ENDIF
OP_ELSE
  1    # 0 NAND X = 1
OP_ENDIF
```

### 承諾方案

Prover 對計算的每個中間狀態做出承諾：

```
# 使用哈希承諾
H(state_0) → H(state_1) → ... → H(state_N)

# 每個狀態轉換對應一個邏輯操作
```

### Taptree 結構

使用 Taproot 的 MAST 樹存儲所有可能的挑戰路徑：

```
                Root
               /    \
          Split1    Split2
         /    \    /    \
       ...   ... ...   ...

# 每個葉節點是一個可能的爭議腳本
```

---

## 四、BitVM 的演進

### BitVM 1.0

**特點：**
- 雙方協議（1 Prover vs 1 Verifier）
- 需要預簽名大量交易
- 適合特定雙方之間的合約

**限制：**
- 只有兩方參與
- 設置複雜度高
- Verifier 必須時刻在線監控

### BitVM 2.0

**改進：**
- 支持 N-of-N 多方
- 任何人都可以成為 Verifier
- 更實用的橋接設計

**關鍵創新：**
- 使用 Groth16 SNARK 驗證器
- 預計算承諾減少交互
- 更高效的爭議解決

---

## 五、主要應用

### 1. 去信任的比特幣橋

**當前跨鏈橋的問題：**
- 多簽託管（信任假設）
- 聯邦側鏈（信任聯邦成員）
- 中心化橋（單點故障）

**BitVM 橋的優勢：**

```
BTC 主鏈                    目標鏈
    │                          │
    │  存入: 1 BTC            │
    ├─────────────────────────→│
    │  BitVM 合約鎖定          │  發行: 1 wrapped BTC
    │                          │
    │  提款請求                │
    ←─────────────────────────┤
    │  驗證/挑戰期             │  銷毀: 1 wrapped BTC
    │  釋放: 1 BTC             │
```

**安全模型：**
- 只需**一個**誠實的 Verifier
- 不是 N-of-M 多簽
- 數學保證而非信任

### 2. 比特幣 Rollups

**ZK Rollup on Bitcoin：**

```
L2 交易
   ↓
批量處理 & 生成 ZK 證明
   ↓
提交證明到比特幣
   ↓
BitVM 驗證證明有效性
```

**優勢：**
- 繼承比特幣安全性
- 高吞吐量（L2 處理）
- 低成本（批量提交）

### 3. 複雜的鏈上合約

**可實現的功能：**
- 預言機驗證
- 複雜的支付條件
- 遊戲和預測市場
- DLC 增強版

---

## 六、BitVM Bridge 深入

### 架構設計

```
┌─────────────────────────────────────────┐
│              BitVM Bridge                │
├─────────────┬─────────────┬─────────────┤
│   存款模組   │   驗證模組   │   提款模組   │
├─────────────┼─────────────┼─────────────┤
│  用戶存入   │  ZK 證明    │  樂觀執行   │
│  BTC       │  驗證      │  欺詐證明   │
└─────────────┴─────────────┴─────────────┘
```

### 存款流程

1. 用戶將 BTC 發送到 BitVM 合約地址
2. 目標鏈監測到存款事件
3. 目標鏈發行對應的 wrapped BTC

### 提款流程

```
Day 0: 用戶在目標鏈請求提款
       ↓
Day 0-7: 挑戰期
       ↓
       ├→ 無挑戰: 自動釋放 BTC
       │
       └→ 有挑戰: 進入爭議解決
                  ↓
              二分搜尋
                  ↓
              鏈上驗證
                  ↓
              正確方獲勝
```

### 安全假設

| 假設 | 說明 |
|------|------|
| 至少一個誠實 Verifier | 只要有一人監控，欺詐就會被發現 |
| 挑戰期足夠長 | 給 Verifier 足夠時間響應 |
| 比特幣網路活躍 | 能及時提交挑戰交易 |

---

## 七、技術挑戰

### 1. 鏈上數據限制

**問題：** 比特幣腳本大小有限

**解決方案：**
- 將大型計算分解為小步驟
- 使用 Taptree 分支存儲
- 只在爭議時展開必要的分支

### 2. 交互複雜度

**問題：** 需要多輪交互完成爭議

**緩解措施：**
- 減少爭議發生（高額保證金）
- 優化二分搜尋效率
- 預計算常見計算路徑

### 3. Liveness 要求

**問題：** Verifier 必須在線監控

**解決方案：**
- 多個 Verifier 冗餘
- 外包監控服務
- 經濟激勵保持在線

### 4. 資本效率

**問題：** 資金在挑戰期被鎖定

**改進方向：**
- 縮短挑戰期（風險權衡）
- 流動性提供者
- 快速退出機制

---

## 八、與其他方案比較

### vs 閃電網路

| 特性 | 閃電網路 | BitVM |
|------|---------|-------|
| 用途 | 支付 | 任意計算 |
| 複雜度 | 低 | 高 |
| 成熟度 | 成熟 | 早期 |
| 通道需求 | 需要 | 不需要 |

### vs Stacks/RSK

| 特性 | Stacks/RSK | BitVM |
|------|-----------|-------|
| 共識 | 獨立 | 比特幣 |
| 安全性 | 較弱 | 繼承 BTC |
| 信任假設 | 聯邦/礦工 | 單一誠實方 |

### vs RGB Protocol

| 特性 | RGB | BitVM |
|------|-----|-------|
| 驗證方式 | 客戶端 | 鏈上 |
| 可擴展性 | 高 | 中 |
| 複雜合約 | 有限 | 任意 |

---

## 九、生態發展

### 活躍專案

#### BitVM Bridge
- **官網：** [bitvm.org](https://bitvm.org/)
- **狀態：** 測試網運行中
- **目標：** 去信任的 BTC 跨鏈橋

#### Citrea
- **官網：** [citrea.xyz](https://citrea.xyz/)
- **類型：** ZK Rollup on Bitcoin
- **特點：** 使用 BitVM 驗證 ZK 證明

#### Build on Bitcoin
- **官網：** [buildonbitcoin.xyz](https://www.buildonbitcoin.xyz/)
- **類型：** 研究與開發
- **重點：** BitVM 工具和標準

### 社區資源

- **[BitVM 白皮書](https://bitvm.org/bitvm.pdf)** - 原始論文
- **[BitVM GitHub](https://github.com/BitVM/BitVM)** - 開源代碼
- **[BitVM Telegram](https://t.me/bitaboratory)** - 社區討論

---

## 十、未來展望

### 短期（2025年）

- 測試網橋接上線
- 更多團隊參與開發
- 安全審計完成

### 中期（2026-2027年）

- 主網橋接部署
- 首批 Rollup 上線
- 開發者工具成熟

### 長期願景

- 比特幣成為結算層
- 複雜 DeFi 在比特幣上實現
- 真正去信任的跨鏈互操作

### 潛在影響

1. **重新定義比特幣能力** - 不只是「數字黃金」
2. **Layer 2 競爭格局** - BitVM 為基礎的新方案
3. **跨鏈橋安全標準** - 從信任到數學證明

---

## 結論

BitVM 是比特幣技術創新的重要里程碑：

1. **無需軟分叉** - 使用現有比特幣腳本能力
2. **圖靈完備驗證** - 任意計算的鏈上爭議解決
3. **去信任橋接** - 突破多簽信任假設
4. **Rollup 可能性** - 比特幣原生擴容方案

雖然仍處於早期階段，但 BitVM 為比特幣生態打開了新的可能性。它證明了在保守的協議設計哲學下，仍然可以通過創新實現複雜功能。

**建議關注：**
- BitVM Bridge 的測試網進展
- Citrea 等 Rollup 專案的發展
- 安全審計和學術研究

---

## 參考資料

- [BitVM: Compute Anything on Bitcoin](https://bitvm.org/bitvm.pdf) - Robin Linus
- [BitVM 2: Bridging Bitcoin to Second Layers](https://bitvm.org/bitvm2)
- [Bitcoin Optech: BitVM](https://bitcoinops.org/en/topics/bitvm/)
- [Turing Complete Bitcoin Script](https://www.youtube.com/watch?v=XxqLENf0Fp0) - Robin Linus 演講
