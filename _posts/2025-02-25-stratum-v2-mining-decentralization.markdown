---
layout: post
title: 'Stratum V2ï¼šç¤¦æ± å”è­°çš„å»ä¸­å¿ƒåŒ–é©å‘½'
date: 2025-02-25
categories:
- æŠ€è¡“æ•™å­¸
- bitcoin
- mining
description: æ·±å…¥è§£æ Stratum V2 å”è­°çš„æŠ€è¡“æ¶æ§‹ï¼Œå¦‚ä½•é€šéå·¥ä½œé¸æ“‡å’ŒåŠ å¯†é€šè¨Šå¯¦ç¾ç¤¦æ± å»ä¸­å¿ƒåŒ–ï¼Œä»¥åŠå°æ¯”ç‰¹å¹£ç¶²è·¯å®‰å…¨çš„é‡è¦æ„ç¾©ã€‚
image: /img/stratum-v2.svg
published: true
hero_image: /img/hero.png
tags:
- bitcoin
- mining
- stratum
- decentralization
- pool
---

## å‰è¨€

æ¯”ç‰¹å¹£æŒ–ç¤¦çš„ä¸­å¿ƒåŒ–å•é¡Œä¸€ç›´æ˜¯ç¤¾å€é—œæ³¨çš„ç„¦é»ã€‚ç›®å‰å¤§å¤šæ•¸ç®—åŠ›é€šéå°‘æ•¸å¹¾å€‹å¤§å‹ç¤¦æ± æ§åˆ¶ï¼Œé€™äº›ç¤¦æ± æ±ºå®šå€å¡Šå…§å®¹ï¼Œç¤¦å·¥åªæ˜¯æä¾›ç®—åŠ›ã€‚**Stratum V2** æ˜¯ä¸€å€‹é©å‘½æ€§çš„å”è­°å‡ç´šï¼Œæ—¨åœ¨å°‡å€å¡Šæ§‹å»ºçš„æ¬ŠåŠ›æ­¸é‚„çµ¦ç¤¦å·¥ã€‚

---

## ä¸€ã€Stratum å”è­°èƒŒæ™¯

### ä»€éº¼æ˜¯ Stratumï¼Ÿ

Stratum æ˜¯ç¤¦å·¥å’Œç¤¦æ± ä¹‹é–“çš„é€šè¨Šå”è­°ï¼š

```
ç¤¦å·¥ â†â”€â”€Stratumâ”€â”€â†’ ç¤¦æ± 

ä½œç”¨ï¼š
1. ç¤¦æ± ç™¼é€å·¥ä½œï¼ˆå€å¡Šæ¨¡æ¿ï¼‰
2. ç¤¦å·¥æäº¤ä»½é¡ï¼ˆsharesï¼‰
3. ç¤¦æ± é©—è­‰ä¸¦æ”¯ä»˜
```

### Stratum V1 çš„å•é¡Œ

2012 å¹´ç”± Slush Pool å‰µå»ºçš„ Stratum V1 å­˜åœ¨åš´é‡ç¼ºé™·ï¼š

| å•é¡Œ | èªªæ˜ | å½±éŸ¿ |
|------|------|------|
| **æ˜æ–‡å‚³è¼¸** | ç„¡åŠ å¯† | å¯è¢«ç›£è½/åŠ«æŒ |
| **ç„¡èªè­‰** | ç„¡æ³•é©—è­‰ç¤¦æ± èº«ä»½ | ä¸­é–“äººæ”»æ“Š |
| **é›†ä¸­æ§åˆ¶** | ç¤¦æ± æ±ºå®šäº¤æ˜“ | å¯©æŸ¥é¢¨éšª |
| **æ•ˆç‡ä½** | JSON æ ¼å¼è‡ƒè…« | å¸¶å¯¬æµªè²» |
| **ç„¡æ¨™æº–** | å„ç¤¦æ± è‡ªè¡Œæ“´å±• | äº’æ“ä½œæ€§å·® |

### ç‚ºä»€éº¼éœ€è¦æ”¹è®Šï¼Ÿ

```
ç•¶å‰æŒ–ç¤¦ä¸­å¿ƒåŒ–å•é¡Œï¼š

å‰ 4 å¤§ç¤¦æ± æ§åˆ¶ > 50% ç®—åŠ›
        â”‚
        â†“
ç¤¦æ± å¯ä»¥ï¼š
  - å¯©æŸ¥ç‰¹å®šäº¤æ˜“
  - å¯¦æ–½ç©ºå€å¡Šæ”»æ“Š
  - è¢«æ”¿åºœæ–½å£“
  - å”èª¿ 51% æ”»æ“Š
```

---

## äºŒã€Stratum V2 æ¦‚è¿°

### æ ¸å¿ƒç›®æ¨™

1. **å»ä¸­å¿ƒåŒ–** - ç¤¦å·¥é¸æ“‡äº¤æ˜“
2. **å®‰å…¨æ€§** - åŠ å¯†é€šè¨Š
3. **æ•ˆç‡** - äºŒé€²åˆ¶å”è­°
4. **æ¨™æº–åŒ–** - é–‹æ”¾è¦ç¯„

### é—œéµå‰µæ–°

```
Stratum V1             Stratum V2
â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€
JSON æ˜æ–‡    â†’    äºŒé€²åˆ¶åŠ å¯†
ç¤¦æ± é¸äº¤æ˜“   â†’    ç¤¦å·¥é¸äº¤æ˜“
ç„¡èªè­‰       â†’    Noise å”è­°èªè­‰
å–®ä¸€é€£æ¥     â†’    å¤šé€šé“
```

### ä¸‰å€‹å­å”è­°

| å­å”è­° | åŠŸèƒ½ | å¿…éœ€ |
|--------|------|------|
| **Mining Protocol** | æ ¸å¿ƒæŒ–ç¤¦é€šè¨Š | æ˜¯ |
| **Job Declaration** | å·¥ä½œè²æ˜ï¼ˆç¤¦å·¥é¸äº¤æ˜“ï¼‰ | å¦ |
| **Template Distribution** | æ¨¡æ¿åˆ†ç™¼ | å¦ |

---

## ä¸‰ã€æŠ€è¡“æ¶æ§‹

### å”è­°å±¤æ¬¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Application Layer              â”‚
â”‚    (Mining, Job Declaration, Template)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Framing Layer                  â”‚
â”‚    (æ¶ˆæ¯åˆ†å¹€å’Œåºåˆ—åŒ–)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Noise Protocol                 â”‚
â”‚    (åŠ å¯†å’Œèªè­‰)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           TCP/IP                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Noise å”è­°åŠ å¯†

Stratum V2 ä½¿ç”¨ Noise Protocol Frameworkï¼š

```
æ¡æ‰‹æ¨¡å¼ï¼šNoise_NX_secp256k1_ChaChaPoly_SHA256

ç‰¹æ€§ï¼š
- å‰å‘ä¿å¯†
- èº«ä»½èªè­‰
- é˜²æ­¢ä¸­é–“äººæ”»æ“Š

æ¡æ‰‹æµç¨‹ï¼š
1. ç¤¦å·¥ â†’ ç¤¦æ± ï¼šè‡¨æ™‚å…¬é‘°
2. ç¤¦æ±  â†’ ç¤¦å·¥ï¼šè‡¨æ™‚å…¬é‘° + éœæ…‹å…¬é‘° + ç°½å
3. å»ºç«‹åŠ å¯†é€šé“
```

### æ¶ˆæ¯æ ¼å¼

**V1ï¼ˆJSONï¼‰ï¼š**
```json
{
  "id": 1,
  "method": "mining.submit",
  "params": ["worker", "job_id", "extranonce2", "ntime", "nonce"]
}
```

**V2ï¼ˆäºŒé€²åˆ¶ï¼‰ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Type â”‚ Size â”‚ Payload          â”‚
â”‚ 2B   â”‚ 3B   â”‚ Variable         â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å„ªå‹¢ï¼š
- æ¸›å°‘ ~50% å¸¶å¯¬
- è§£ææ›´å¿«
- ç„¡æ­§ç¾©
```

---

## å››ã€å·¥ä½œé¸æ“‡ï¼ˆJob Declarationï¼‰

### æ ¸å¿ƒæ¦‚å¿µ

Job Declaration å”è­°å…è¨±ç¤¦å·¥é¸æ“‡å€å¡Šå…§çš„äº¤æ˜“ï¼š

```
å‚³çµ±æ¨¡å¼ï¼ˆV1ï¼‰ï¼š
ç¤¦æ±  â†’ å®Œæ•´å€å¡Šæ¨¡æ¿ â†’ ç¤¦å·¥
       â†“
       ç¤¦å·¥åªèƒ½æ¥å—æˆ–æ–·é–‹

æ–°æ¨¡å¼ï¼ˆV2 + Job Declarationï¼‰ï¼š
ç¤¦å·¥ â†’ æœ¬åœ°æ§‹å»ºå€å¡Šæ¨¡æ¿ â†’ æäº¤çµ¦ç¤¦æ± é©—è­‰
       â†“
       ç¤¦å·¥æ§åˆ¶äº¤æ˜“é¸æ“‡
```

### æŠ€è¡“æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç¤¦å·¥       â”‚         â”‚    ç¤¦æ±      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                        â”‚
       â”‚  1. è²æ˜è‡ªå®šç¾©å·¥ä½œ      â”‚
       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚
       â”‚    (merkle root)       â”‚
       â”‚                        â”‚
       â”‚  2. é©—è­‰åŸºæœ¬æœ‰æ•ˆæ€§      â”‚
       â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
       â”‚    (æ¥å—/æ‹’çµ•)         â”‚
       â”‚                        â”‚
       â”‚  3. æäº¤ä»½é¡           â”‚
       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚
       â”‚                        â”‚
```

### é©—è­‰è¦å‰‡

ç¤¦æ± ä»ç„¶å¯ä»¥åŸ·è¡ŒåŸºæœ¬é©—è­‰ï¼š

```
ç¤¦æ± é©—è­‰å…§å®¹ï¼š
âœ… å€å¡Šé ­æ ¼å¼æ­£ç¢º
âœ… é›£åº¦ç›®æ¨™æ­£ç¢º
âœ… æ™‚é–“æˆ³åˆç†
âœ… coinbase è¼¸å‡ºæ­£ç¢º

ç¤¦æ± ä¸é—œå¿ƒï¼š
âŒ å…·é«”åŒ…å«å“ªäº›äº¤æ˜“
âŒ äº¤æ˜“é †åº
âŒ è²»ç”¨æœ€å„ªåŒ–
```

### é˜²æ­¢æƒ¡æ„è¡Œç‚º

```
å¦‚æœç¤¦å·¥æäº¤ç„¡æ•ˆå€å¡Šï¼š

1. ç¤¦æ± ä¸æœƒå»£æ’­ç„¡æ•ˆå€å¡Š
2. ç¤¦å·¥æµªè²»è‡ªå·±çš„ç®—åŠ›
3. ç¶“æ¿Ÿæ¿€å‹µä¿æŒèª å¯¦

çµæœï¼š
- ç¤¦å·¥æœ‰å‹•åŠ›æ§‹å»ºæœ‰æ•ˆå€å¡Š
- ä½†å¯ä»¥é¸æ“‡è‡ªå·±çš„äº¤æ˜“å„ªå…ˆé †åº
```

---

## äº”ã€å¯¦éš›éƒ¨ç½²æ¶æ§‹

### å ´æ™¯ä¸€ï¼šç°¡å–®å‡ç´š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ASIC ç¤¦æ©Ÿ   â”‚ â”€â”€â†’  â”‚  SV2 Proxy   â”‚ â”€â”€â†’ ç¤¦æ± 
â”‚  (Stratum V1) â”‚      â”‚  (ç¿»è­¯å±¤)    â”‚     (SV2)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å„ªé»ï¼š
- ä¸éœ€è¦æ›´æ›ç¤¦æ©Ÿ
- ç«‹å³ç²å¾—åŠ å¯†å¥½è™•
- æ¼¸é€²å¼å‡ç´š
```

### å ´æ™¯äºŒï¼šå®Œæ•´éƒ¨ç½²

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ASIC ç¤¦æ©Ÿ   â”‚
â”‚  (åŸç”Ÿ SV2)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ åŠ å¯†é€£æ¥
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Job          â”‚ â”€â”€â†’  â”‚   ç¤¦æ±        â”‚
â”‚ Declarator   â”‚      â”‚   (SV2)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Bitcoin Core â”‚
â”‚ (æ¨¡æ¿ä¾†æº)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å„ªé»ï¼š
- å®Œæ•´çš„å·¥ä½œé¸æ“‡èƒ½åŠ›
- æœ€å¤§åŒ–å»ä¸­å¿ƒåŒ–
```

### å ´æ™¯ä¸‰ï¼šç¨ç«‹æŒ–ç¤¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ASIC ç¤¦æ©Ÿ   â”‚
â”‚  (åŸç”Ÿ SV2)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Template     â”‚ â†â”€â”€  â”‚ Bitcoin Core â”‚
â”‚ Provider     â”‚      â”‚ (ç¯€é»)       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
   ç›´æ¥æäº¤å€å¡Š

é©ç”¨ï¼š
- å¤§å‹ç¤¦å ´
- è¿½æ±‚å®Œå…¨è‡ªä¸»
- è¶³å¤ ç®—åŠ›ä¿è­‰æ”¶ç›Š
```

---

## å…­ã€èˆ‡ç¤¦æ± çš„é—œä¿‚

### ç¤¦æ± çš„æ–°è§’è‰²

```
å‚³çµ±ç¤¦æ± è·è²¬ï¼š
1. æ§‹å»ºå€å¡Šæ¨¡æ¿
2. åˆ†ç™¼å·¥ä½œ
3. é©—è­‰ä»½é¡
4. æ”¯ä»˜ç¤¦å·¥

Stratum V2 å¾Œï¼š
1. ï¼ˆå¯é¸ï¼‰æ§‹å»ºå€å¡Šæ¨¡æ¿
2. åˆ†ç™¼å·¥ä½œ/æ¥å—ç¤¦å·¥å·¥ä½œ
3. é©—è­‰ä»½é¡
4. æ”¯ä»˜ç¤¦å·¥
5. æä¾›ä¿éšªæ€§æ”¶å…¥å¹³æ»‘
```

### ç¤¦æ± é©æ‡‰ç­–ç•¥

| ç­–ç•¥ | èªªæ˜ | ä¾‹å­ |
|------|------|------|
| **å®Œå…¨æ”¯æ´** | å…è¨±ç¤¦å·¥é¸æ“‡äº¤æ˜“ | Braiins Pool |
| **éƒ¨åˆ†æ”¯æ´** | åŠ å¯†é€šè¨Šä½†ä¸æ”¯æ´ JD | å¾…å®š |
| **æŠµåˆ¶** | ç¹¼çºŒä½¿ç”¨ V1 | éƒ¨åˆ†ä¸­åœ‹ç¤¦æ±  |

### ç¶“æ¿Ÿæ¿€å‹µ

```
ç‚ºä»€éº¼ç¤¦æ± æœƒæ”¯æ´ï¼Ÿ

1. ç«¶çˆ­å£“åŠ›
   - å¦‚æœå…¶ä»–ç¤¦æ± æ”¯æ´ï¼Œä¸æ”¯æ´æœƒå¤±å»ç¤¦å·¥

2. æ¸›å°‘è²¬ä»»
   - ä¸å†ç‚ºå€å¡Šå…§å®¹è² è²¬
   - é™ä½ç›£ç®¡é¢¨éšª

3. æ•ˆç‡æå‡
   - äºŒé€²åˆ¶å”è­°ç¯€çœè³‡æº
   - åŠ å¯†é˜²æ­¢ç®—åŠ›åŠ«æŒ
```

---

## ä¸ƒã€å®‰å…¨æ€§åˆ†æ

### é˜²æ­¢çš„æ”»æ“Š

**1. ç®—åŠ›åŠ«æŒ**

```
V1 é¢¨éšªï¼š
æ”»æ“Šè€… â”€â”€ç›£è½â”€â”€â†’ ç¤¦å·¥é€£æ¥ â”€â”€æ›¿æ›â”€â”€â†’ ç™¼é€å‡å·¥ä½œ
                                    â†“
                              ç®—åŠ›è¢«ç›œç”¨

V2 è§£æ±ºï¼š
åŠ å¯†é€šé“ â†’ ç„¡æ³•ç›£è½æˆ–ç¯¡æ”¹
```

**2. ä¸­é–“äººæ”»æ“Š**

```
V1 é¢¨éšªï¼š
ç¤¦å·¥ â†â”€â”€?â”€â”€â†’ æ”»æ“Šè€… â†â”€â”€?â”€â”€â†’ çœŸå¯¦ç¤¦æ± 

V2 è§£æ±ºï¼š
- Noise å”è­°èªè­‰
- ç¤¦æ± å…¬é‘°é©—è­‰
- ç„¡æ³•å½é€ èº«ä»½
```

**3. é¸æ“‡æ€§å¯©æŸ¥**

```
V1 é¢¨éšªï¼š
ç¤¦æ± æ±ºå®šå€å¡Šå…§å®¹ â†’ å¯æ’é™¤ç‰¹å®šäº¤æ˜“

V2 + Job Declarationï¼š
ç¤¦å·¥æ±ºå®šå€å¡Šå…§å®¹ â†’ å¯©æŸ¥éœ€è¦å…¨ç¶²ç¤¦å·¥é…åˆ
```

### æ®˜é¤˜é¢¨éšª

| é¢¨éšª | èªªæ˜ | ç·©è§£ |
|------|------|------|
| ç¤¦æ± æ‹’çµ•å·¥ä½œ | ç¤¦æ± å¯ä»¥æ‹’çµ•ç‰¹å®šäº¤æ˜“ | ç¤¦å·¥å¯ä»¥æ›ç¤¦æ±  |
| 51% æ”»æ“Š | ä»ç„¶å¯èƒ½ | ä¸æ˜¯å”è­°å±¤å•é¡Œ |
| ç¤¦å·¥åˆè¬€ | ç¤¦å·¥å¯èƒ½ä¸²é€š | ç¶“æ¿Ÿæ¿€å‹µå°æŠ— |

---

## å…«ã€å¯¦ç¾ç‹€æ…‹

### æ ¸å¿ƒé–‹ç™¼

**Stratum Reference Implementation (SRI)ï¼š**

```bash
# å®‰è£ SRI
git clone https://github.com/stratum-mining/stratum
cd stratum
cargo build --release

# é‹è¡Œç¿»è­¯ä»£ç†
./target/release/translator_proxy \
  --upstream-address pool.example.com:3333 \
  --downstream-port 3334
```

### ç¤¦æ± æ”¯æ´

| ç¤¦æ±  | ç‹€æ…‹ | å‚™è¨» |
|------|------|------|
| **Braiins Pool** | âœ… ç”Ÿç”¢ç’°å¢ƒ | é¦–å€‹æ”¯æ´ |
| **DEMAND** | âœ… æ”¯æ´ | å®Œæ•´ JD |
| **Ocean** | âœ… æ”¯æ´ | Luke Dashjr é …ç›® |
| **Foundry** | ğŸš§ æ¸¬è©¦ä¸­ | è¨ˆåŠƒæ”¯æ´ |
| **F2Pool** | ğŸš§ è©•ä¼°ä¸­ | å¾…å®š |

### ç¡¬é«”æ”¯æ´

| è£½é€ å•† | ç‹€æ…‹ |
|--------|------|
| **Bitmain** | ğŸš§ è¨è«–ä¸­ |
| **MicroBT** | ğŸš§ è¨è«–ä¸­ |
| **Intel (Blockscale)** | âœ… åŸç”Ÿæ”¯æ´ |

### è»Ÿé«”ç”Ÿæ…‹

- **SRI Proxy** - ç¿»è­¯ä»£ç†ï¼ˆV1 â†’ V2ï¼‰
- **BraiinsOS** - æ”¯æ´ SV2 çš„ç¤¦æ©Ÿå›ºä»¶
- **Bitcoin Core** - æ¨¡æ¿æä¾›æ•´åˆï¼ˆé€²è¡Œä¸­ï¼‰

---

## ä¹ã€å°æ¯”ç‰¹å¹£çš„æ„ç¾©

### ç¶²è·¯å®‰å…¨å½±éŸ¿

```
ç•¶å‰ç‹€æ³ï¼š
4 å€‹ç¤¦æ±  > 50% ç®—åŠ›
        â”‚
        â†“
ç†è«–ä¸Šå¯ä»¥å”èª¿å¯©æŸ¥

Stratum V2 å¾Œï¼š
4 å€‹ç¤¦æ±  > 50% ç®—åŠ›
        â”‚
        ä½†æ˜¯
        â†“
æ¯å€‹ç¤¦å·¥ç¨ç«‹é¸æ“‡äº¤æ˜“
        â”‚
        â†“
å¯©æŸ¥éœ€è¦å”èª¿æ‰€æœ‰ç¤¦å·¥ï¼ˆä¸å¯èƒ½ï¼‰
```

### å»ä¸­å¿ƒåŒ–æŒ‡æ¨™

| æŒ‡æ¨™ | V1 | V2 + JD |
|------|----|---------|
| å€å¡Šæ§‹å»ºè€… | ~10 ç¤¦æ±  | ~100,000+ ç¤¦å·¥ |
| å¯©æŸ¥é–€æª» | å”èª¿ 4 ç¤¦æ±  | å”èª¿å¤§å¤šæ•¸ç¤¦å·¥ |
| äº¤æ˜“åŒ…å«æ±ºå®š | ä¸­å¿ƒåŒ– | å»ä¸­å¿ƒåŒ– |

### èˆ‡æ¯”ç‰¹å¹£ç²¾ç¥ä¸€è‡´

```
ä¸­æœ¬è°çš„é¡˜æ™¯ï¼š
"ä¸€ CPU ä¸€ç¥¨"

ç¾å¯¦ï¼š
"ä¸€ç¤¦æ± ä¸€ç¥¨"

Stratum V2ï¼š
"å›æ­¸ä¸€ç¤¦å·¥ä¸€ç¥¨ï¼ˆåœ¨å€å¡Šæ§‹å»ºä¸Šï¼‰"
```

---

## åã€æŒ‘æˆ°èˆ‡å±•æœ›

### æ¡ç”¨æŒ‘æˆ°

**1. ç¡¬é«”å‡ç´š**
```
å•é¡Œï¼šç¾æœ‰ ASIC ä¸æ”¯æ´åŸç”Ÿ SV2
è§£æ±ºï¼šç¿»è­¯ä»£ç†å…è¨±æ¼¸é€²å‡ç´š
æ™‚é–“ç·šï¼š3-5 å¹´å®Œå…¨éæ¸¡
```

**2. ç¤¦æ± æ¿€å‹µ**
```
å•é¡Œï¼šç¤¦æ± å¤±å»æ§åˆ¶æ¬Š
è§£æ±ºï¼šæ•ˆç‡æå‡ + ç«¶çˆ­å£“åŠ›
```

**3. æ•™è‚²å’Œæ„è­˜**
```
å•é¡Œï¼šç¤¦å·¥ä¸äº†è§£å¥½è™•
è§£æ±ºï¼šç¤¾å€æ•™è‚² + å¯¦éš›æ¼”ç¤º
```

### æœªä¾†ç™¼å±•

1. **Bitcoin Core æ•´åˆ**
   - å…§å»ºæ¨¡æ¿åˆ†ç™¼
   - ç°¡åŒ–ç¨ç«‹æŒ–ç¤¦

2. **æ›´å¤šç¡¬é«”æ”¯æ´**
   - ä¸»è¦ ASIC è£½é€ å•†
   - åŸç”Ÿ SV2 èŠ¯ç‰‡

3. **æ–°åŠŸèƒ½**
   - æ›´å¥½çš„ä»½é¡é©—è­‰
   - è·¨æ± å¤±æ•ˆè½‰ç§»

### è·¯ç·šåœ–

```
2023-2024ï¼š
  - SRI ç©©å®šç‰ˆæœ¬
  - ä¸»è¦ç¤¦æ± æ¸¬è©¦

2024-2025ï¼š
  - ç¡¬é«”è£½é€ å•†æ•´åˆ
  - æ›´å¤šç¤¦æ± ç”Ÿç”¢éƒ¨ç½²

2025+ï¼š
  - åŸç”Ÿ SV2 ç¤¦æ©Ÿæ™®åŠ
  - Job Declaration å»£æ³›ä½¿ç”¨
```

---

## é–‹ç™¼è€…æŒ‡å—

### è¨­ç½®ç¿»è­¯ä»£ç†

```bash
# é…ç½®æ–‡ä»¶ proxy-config.toml
[upstream]
address = "pool.example.com:3333"
authority_pubkey = "abc123..."

[downstream]
listen_address = "0.0.0.0:3334"

# å•Ÿå‹•ä»£ç†
./sv2-translator-proxy --config proxy-config.toml
```

### å¯¦ç¾è‡ªå®šç¾© Job Declarator

```rust
use stratum_v2::job_declaration::*;

async fn declare_job(
    template: BlockTemplate,
    declarator: &JobDeclarator
) -> Result<JobId, Error> {
    // å¾ Bitcoin Core ç²å–äº¤æ˜“
    let transactions = get_mempool_transactions().await?;

    // æ§‹å»º merkle tree
    let merkle_root = build_merkle_root(&transactions);

    // è²æ˜å·¥ä½œ
    let job = declarator.declare_mining_job(
        merkle_root,
        template.version,
        template.prev_block_hash,
    ).await?;

    Ok(job.id)
}
```

### ç›£æ§å’Œèª¿è©¦

```bash
# æŸ¥çœ‹é€£æ¥ç‹€æ…‹
sv2-cli status

# è¼¸å‡ºç¤ºä¾‹
Connection: Encrypted (Noise_NX)
Pool: pool.example.com
Upstream Version: SV2
Jobs Declared: 1,234
Shares Submitted: 56,789
```

---

## çµè«–

Stratum V2 ä»£è¡¨äº†æ¯”ç‰¹å¹£æŒ–ç¤¦åŸºç¤è¨­æ–½çš„é‡å¤§é€²æ­¥ï¼š

1. **å®‰å…¨æ€§æå‡** - åŠ å¯†é€šè¨Šé˜²æ­¢åŠ«æŒå’Œç›£è½
2. **æ•ˆç‡æ”¹é€²** - äºŒé€²åˆ¶å”è­°æ¸›å°‘å¸¶å¯¬å’Œå»¶é²
3. **å»ä¸­å¿ƒåŒ–** - ç¤¦å·¥é¸æ“‡äº¤æ˜“ï¼Œåˆ†æ•£å€å¡Šæ§‹å»ºæ¬ŠåŠ›
4. **æ¨™æº–åŒ–** - é–‹æ”¾å”è­°ä¿ƒé€²ç”Ÿæ…‹ç³»çµ±ç™¼å±•

å°æ–¼æ¯”ç‰¹å¹£çš„é•·æœŸå®‰å…¨ï¼ŒStratum V2 çš„ Job Declaration åŠŸèƒ½å°¤ç‚ºé‡è¦ã€‚å®ƒå°‡å€å¡Šæ§‹å»ºçš„æ¬ŠåŠ›å¾å°‘æ•¸ç¤¦æ± åˆ†æ•£åˆ°æˆåƒä¸Šè¬çš„ç¨ç«‹ç¤¦å·¥ï¼Œä½¿å¾—å¯©æŸ¥æ”»æ“Šè®Šå¾—æ¥µå…¶å›°é›£ã€‚

**è¡Œå‹•å»ºè­°ï¼š**
- âœ… ç¤¦å·¥ï¼šè¯ç¹«ç¤¦æ± è©¢å• SV2 æ”¯æ´
- âœ… ç¤¦æ± ï¼šé–‹å§‹ SV2 æ•´åˆæ¸¬è©¦
- âœ… é–‹ç™¼è€…ï¼šåƒèˆ‡ SRI é–‹ç™¼
- âœ… ç¤¾å€ï¼šæ¨å»£ SV2 æ„è­˜

---

## åƒè€ƒè³‡æ–™

- [Stratum V2 å®˜æ–¹ç¶²ç«™](https://stratumprotocol.org/)
- [Stratum Reference Implementation](https://github.com/stratum-mining/stratum)
- [Braiins Stratum V2 æ–‡æª”](https://braiins.com/stratum-v2)
- [Bitcoin Optech: Stratum V2](https://bitcoinops.org/en/topics/stratum-v2/)
- [BIP: Stratum V2](https://github.com/stratum-mining/sv2-spec)
