---
layout: post
title: 'Fedimint：聯邦化的比特幣銀行'
date: 2025-02-15
categories:
- 技術教學
- bitcoin
- fedimint
description: 深入解析 Fedimint，一個結合 Chaumian eCash 和聯邦託管的比特幣擴展方案，為社區提供隱私支付和共享託管。
image: /img/fedimint.svg
published: true
hero_image: /img/hero.png
tags:
- bitcoin
- fedimint
- ecash
- privacy
- custody
---

## 前言

比特幣的自託管對許多用戶來說仍然是一個挑戰。**Fedimint** 提供了一個創新的解決方案：通過聯邦化的 Chaumian eCash 系統，在信任的社區內實現隱私支付，同時保持與比特幣和閃電網路的互操作性。

---

## 一、什麼是 Fedimint？

### 核心概念

Fedimint = **Fed**erated + **Mint**

```
用戶存入 BTC
      ↓
聯邦保管 BTC（多簽）
      ↓
發行 eCash 代幣
      ↓
用戶持有 eCash（完美隱私）
      ↓
可隨時贖回 BTC
```

### 三大支柱

| 支柱 | 技術 | 作用 |
|------|------|------|
| **聯邦託管** | 多簽錢包 | 分散信任 |
| **Chaumian eCash** | 盲簽名 | 交易隱私 |
| **閃電網路** | LN 閘道 | 外部支付 |

### 與傳統託管比較

| 特性 | 交易所託管 | Fedimint |
|------|-----------|----------|
| 信任模型 | 單一機構 | 多方聯邦 |
| 隱私 | 完全透明 | 完美隱私 |
| 規模 | 全球 | 社區級 |
| 監管 | 高度監管 | 社區自治 |

---

## 二、Chaumian eCash 原理

### David Chaum 的發明

1982 年，David Chaum 發明了盲簽名技術，實現了電子現金：

```
傳統簽名：
  用戶：「請簽署 X」
  銀行：「我簽署了 X」→ 銀行知道 X

盲簽名：
  用戶：「請簽署 blind(X)」
  銀行：「我簽署了 blind(X)」→ 銀行不知道 X
  用戶：unblind(signed) → 得到 X 的有效簽名
```

### eCash 流程

```
1. 鑄造（Mint）
   用戶 → 發送 BTC + 盲化請求 → 聯邦
   聯邦 → 返回盲簽名 → 用戶解盲得到 eCash

2. 轉帳（Transfer）
   Alice 的 eCash → Bob（離線傳輸）
   Bob 向聯邦驗證（聯邦無法關聯 Alice）

3. 贖回（Redeem）
   用戶 → 提交 eCash → 聯邦
   聯邦 → 驗證有效 → 發送 BTC
```

### 隱私特性

```
聯邦看到：
  ✅ 總存款量
  ✅ 總提款量
  ❌ 誰給誰轉帳
  ❌ 個人餘額
  ❌ 交易歷史
```

**這就是「完美隱私」- 即使聯邦也無法追蹤用戶交易。**

---

## 三、聯邦架構

### 聯邦成員

一個典型的 Fedimint 聯邦由 4-7 個「守護者」(Guardians) 組成：

```
        ┌─────────────┐
        │   聯邦      │
        │  (4-of-7)   │
        └─────────────┘
              │
    ┌─────────┼─────────┐
    │    │    │    │    │
   G1   G2   G3   G4   G5...

每個守護者：
- 持有多簽私鑰碎片
- 運行 Fedimint 節點
- 參與共識決策
```

### 信任模型

| 配置 | 安全性 | 活性 |
|------|--------|------|
| 3-of-5 | 容忍 2 個惡意 | 需要 3 個在線 |
| 4-of-7 | 容忍 3 個惡意 | 需要 4 個在線 |
| 5-of-9 | 容忍 4 個惡意 | 需要 5 個在線 |

### 共識機制

Fedimint 使用拜占庭容錯共識（BFT）：

```
交易提案
    ↓
守護者驗證
    ↓
達成共識（2/3+ 同意）
    ↓
執行交易
```

---

## 四、閃電網路整合

### Lightning Gateway

Fedimint 通過「閃電網路閘道」連接外部世界：

```
┌─────────────────────────────────────────────┐
│                  Fedimint                    │
│  ┌─────────┐    ┌─────────┐                 │
│  │ 用戶 A  │←──→│ 用戶 B  │  (eCash 內部)   │
│  └─────────┘    └─────────┘                 │
│        ↑              ↑                      │
│        └──────┬───────┘                      │
│               ↓                              │
│        ┌─────────────┐                       │
│        │ LN Gateway  │                       │
│        └─────────────┘                       │
└────────────────│─────────────────────────────┘
                 │
                 ↓
          ┌─────────────┐
          │ 閃電網路    │
          │ (外部世界)  │
          └─────────────┘
```

### 支付流程

**接收閃電支付：**
```
1. 用戶請求 LN invoice（通過 Gateway）
2. Gateway 創建真正的 LN invoice
3. 外部付款者支付
4. Gateway 收到 sats
5. Gateway 為用戶鑄造等量 eCash
```

**發送閃電支付：**
```
1. 用戶提交 LN invoice + eCash
2. Gateway 銷毀 eCash
3. Gateway 通過 LN 支付 invoice
4. 完成
```

### Gateway 激勵

```
Gateway 收取服務費：
  - 入金費用：0.1-1%
  - 出金費用：0.1-1%
  - 路由費用（標準 LN 費用）
```

---

## 五、應用場景

### 1. 社區銀行

```
場景：偏遠地區的小型社區

成員：
- 當地商家（守護者）
- 社區領袖（守護者）
- 技術人員（守護者）

用途：
- 日常小額支付
- 儲蓄
- 社區內借貸
```

### 2. 家族金庫

```
場景：家族共同管理資產

配置：3-of-5 聯邦
- 父母（2 個守護者）
- 成年子女（3 個守護者）

優勢：
- 沒有單點故障
- 繼承簡化
- 家庭內部隱私
```

### 3. 組織資金

```
場景：DAO 或非營利組織

守護者：
- 董事會成員
- 財務主管
- 外部審計

功能：
- 透明的外部審計
- 內部支付隱私
- 多簽安全
```

### 4. 開發中國家

```
挑戰：
- 銀行服務不足
- 貨幣不穩定
- 缺乏金融基礎設施

Fedimint 解決方案：
- 社區自組織
- 比特幣計價
- 低技術門檻
```

---

## 六、技術深入

### eCash 面額系統

```rust
// 面額示例（以 sats 計）
denominations = [1, 2, 4, 8, 16, 32, 64, 128, 256, ...]

// 100 sats = 64 + 32 + 4 = 三張代幣
amount_100 = [Note(64), Note(32), Note(4)]
```

### 雙重花費防護

```
1. 每個 eCash 代幣有唯一序列號
2. 聯邦維護「已花費」數據庫
3. 驗證時檢查是否已存在
4. 存在則拒絕
```

### 備份和恢復

```
用戶備份內容：
- 聯邦邀請碼
- 私鑰種子

恢復流程：
1. 使用種子派生密鑰
2. 連接聯邦
3. 請求餘額證明
4. 重新發行等值 eCash
```

---

## 七、與其他方案比較

### vs Cashu

| 特性 | Fedimint | Cashu |
|------|----------|-------|
| 託管模型 | 聯邦多簽 | 單一託管人 |
| 複雜度 | 高 | 低 |
| 信任 | 分散 | 集中 |
| 適用規模 | 中等社區 | 小型/個人 |

### vs 閃電網路

| 特性 | Fedimint | 閃電網路 |
|------|----------|----------|
| 隱私 | 完美 | 部分 |
| 在線要求 | 低 | 高 |
| 自託管 | 否（聯邦） | 是 |
| 支付確認 | 即時 | 即時 |

### vs Liquid

| 特性 | Fedimint | Liquid |
|------|----------|--------|
| 聯邦類型 | 社區驅動 | 商業聯邦 |
| 代幣標準 | eCash | L-BTC + 資產 |
| 隱私 | 完美 | 機密交易 |
| 去中心化 | 更高 | 固定成員 |

---

## 八、部署和運營

### 啟動聯邦

```bash
# 1. 每個守護者生成密鑰
fedimint-dkg generate-keys

# 2. 執行分佈式密鑰生成（DKG）
fedimint-dkg ceremony

# 3. 啟動守護者節點
fedimintd --config guardian.toml

# 4. 配置 Lightning Gateway
gateway-lnd --federation <邀請碼>
```

### 用戶加入

```bash
# 使用 Fedi App 或其他客戶端
# 掃描聯邦邀請碼
# 存入比特幣
# 開始使用 eCash
```

### 監控和維護

```
守護者職責：
- 保持節點在線（99%+ uptime）
- 安全保管私鑰
- 參與升級決策
- 監控異常活動
```

---

## 九、風險和考量

### 信任假設

```
用戶必須信任：
- 聯邦多數成員誠實
- 守護者不會串通
- 聯邦不會消失

緩解措施：
- 選擇可信的社區
- 保持餘額合理（不要 all-in）
- 多個聯邦分散風險
```

### 監管風險

```
潛在問題：
- 是否構成貨幣服務業務？
- KYC/AML 要求？
- 各國法律不同

現狀：
- 大多數司法管轄區尚不明確
- 社區級小規模可能豁免
- 需要法律諮詢
```

### 技術風險

| 風險 | 影響 | 緩解 |
|------|------|------|
| 共識故障 | 資金凍結 | 冗餘守護者 |
| 密鑰洩漏 | 資金被盜 | 硬體安全模組 |
| 軟體漏洞 | 各種 | 審計、漸進部署 |

---

## 十、生態系統

### Fedi App

官方的用戶應用：

* **[Fedi](https://www.fedi.xyz/)** - 移動端應用
* 功能：
  - 加入多個聯邦
  - eCash 錢包
  - 閃電網路支付
  - 社交功能

### 開發資源

* **[Fedimint GitHub](https://github.com/fedimint/fedimint)** - 核心代碼
* **[文檔](https://fedimint.org/docs/)** - 技術文檔
* **[Fedimint Web SDK](https://web.fedimint.org/)** - Web 開發

### 社區

* **[Discord](https://discord.gg/fedimint)** - 開發者社區
* **[Twitter](https://twitter.com/fedaboratory)** - 最新動態

---

## 結論

Fedimint 代表了比特幣擴展和隱私的創新方向：

1. **社區級解決方案** - 不是全球系統，而是本地化信任
2. **完美隱私** - Chaumian eCash 的數學保證
3. **降低門檻** - 社區共享自託管的責任
4. **閃電整合** - 與更廣泛的比特幣生態連接

對於尋求隱私、信任熟悉社區、或金融服務不足地區的用戶，Fedimint 提供了獨特的價值主張。

**適合場景：**
- ✅ 社區和家族
- ✅ 發展中市場
- ✅ 隱私需求高
- ⚠️ 需要信任聯邦成員

---

## 參考資料

- [Fedimint 官網](https://fedimint.org/)
- [Fedimint 白皮書](https://fedimint.org/Fedimint-Whitepaper.pdf)
- [David Chaum: Blind Signatures](https://www.chaum.com/publications/Blind_Signatures_for_Untraceable_Payments.pdf)
- [Fedi App](https://www.fedi.xyz/)
- [Bitcoin Optech: Fedimint](https://bitcoinops.org/en/topics/fedimint/)
