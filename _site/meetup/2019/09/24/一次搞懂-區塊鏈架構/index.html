
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>一次搞懂「區塊鏈架構」 - 密碼龐克 Cypherpunks Taiwan</title>
    <link rel="stylesheet" href="/assets/css/app.css">
    <link rel="shortcut icon" type="image/png" href="/favicon.png" />
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>一次搞懂「區塊鏈架構」 | 密碼龐克 Cypherpunks Taiwan</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="一次搞懂「區塊鏈架構」" />
<meta name="author" content="Cypherpunks Core" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="深入且完整地介紹區塊鏈技術架構，並且帶大家認識目前區塊鏈遇到的各種問題及許多專案在嘗試解決的部分！" />
<meta property="og:description" content="深入且完整地介紹區塊鏈技術架構，並且帶大家認識目前區塊鏈遇到的各種問題及許多專案在嘗試解決的部分！" />
<link rel="canonical" href="http://localhost:4000/meetup/2019/09/24/%E4%B8%80%E6%AC%A1%E6%90%9E%E6%87%82-%E5%8D%80%E5%A1%8A%E9%8F%88%E6%9E%B6%E6%A7%8B/" />
<meta property="og:url" content="http://localhost:4000/meetup/2019/09/24/%E4%B8%80%E6%AC%A1%E6%90%9E%E6%87%82-%E5%8D%80%E5%A1%8A%E9%8F%88%E6%9E%B6%E6%A7%8B/" />
<meta property="og:site_name" content="密碼龐克 Cypherpunks Taiwan" />
<meta property="og:image" content="http://localhost:4000/img/73.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-09-24T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"深入且完整地介紹區塊鏈技術架構，並且帶大家認識目前區塊鏈遇到的各種問題及許多專案在嘗試解決的部分！","headline":"一次搞懂「區塊鏈架構」","dateModified":"2019-09-24T00:00:00+08:00","image":"http://localhost:4000/img/73.png","datePublished":"2019-09-24T00:00:00+08:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/meetup/2019/09/24/%E4%B8%80%E6%AC%A1%E6%90%9E%E6%87%82-%E5%8D%80%E5%A1%8A%E9%8F%88%E6%9E%B6%E6%A7%8B/"},"url":"http://localhost:4000/meetup/2019/09/24/%E4%B8%80%E6%AC%A1%E6%90%9E%E6%87%82-%E5%8D%80%E5%A1%8A%E9%8F%88%E6%9E%B6%E6%A7%8B/","author":{"@type":"Person","name":"Cypherpunks Core"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-131051587-3"></script>
<script>
  window['ga-disable-UA-131051587-3'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-131051587-3');
</script><!-- head scripts --></head>

  <body>
    
<nav class="navbar is-primary" >
    <div class="container">
        <div class="navbar-brand">
            <a href="/" class="navbar-item">
                密碼龐克 Cypherpunks Taiwan
            </a>
            <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navMenu">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>
        <div class="navbar-menu" id="navMenu">
            <div class="navbar-start">
                <a href="/" class="navbar-item ">Home</a>
                
                
                    
                    <div class="navbar-item has-dropdown is-hoverable">
                        <a href="/#" class="navbar-link ">資源</a>
                        <div class="navbar-dropdown">
                            
                            <a href="/markdown/resources/resources-bitcoin/" class="navbar-item ">比特幣 | Bitcoin</a>
                            
                            <a href="/markdown/resources/resources-ln/" class="navbar-item ">閃電網路 | Lightning network</a>
                            
                            <a href="/markdown/resources/resources-blockchain-privacy/" class="navbar-item ">區塊隱私 | Blockchain privacy</a>
                            
                            <a href="/markdown/resources/resources-schnorr-signature/" class="navbar-item ">Schnorr 簽名 | Schnorr Signature</a>
                            
                            <a href="/markdown/resources/resources-ethereum/" class="navbar-item ">以太坊 | Ethereum</a>
                            
                        </div>
                    </div>
                    
                
                    
                    <div class="navbar-item has-dropdown is-hoverable">
                        <a href="/#" class="navbar-link ">知識庫</a>
                        <div class="navbar-dropdown">
                            
                            <a href="/markdown/knowledge/knowledge-bitcoin/" class="navbar-item ">比特幣 | Bitcoin</a>
                            
                            <a href="/markdown/knowledge/knowledge-ethereum/" class="navbar-item ">以太坊 | Ethereum</a>
                            
                        </div>
                    </div>
                    
                
                    
                    <a href="/markdown/products/" class="navbar-item ">書籍 & 論文</a>
                    
                
                    
                    <a href="/markdown/SatelliteProject/" class="navbar-item ">衛星計畫</a>
                    
                
                    
                    <a href="/blog/" class="navbar-item ">Blog</a>
                    
                
                    
                    <a href="/markdown/about/" class="navbar-item ">關於</a>
                    
                
                
            </div>
        </div>
    </div>
</nav>

    
        <section class="hero  is-medium  is-bold is-primary"  style="background: url('/img/hero.png') no-repeat center center; background-size: cover;" >
    <div class="hero-body">
        <div class="container">
            <p class="title is-2">一次搞懂「區塊鏈架構」</p>
            <p class="subtitle is-3"></p>
            
        </div>
    </div>
</section>
    
    


    <section class="section">
        <div class="container">
            <div class="columns">
                
                <div class="column is-8">
                    
                    <div class="content">

    <p>Published: Sep 24, 2019 by Cypherpunks Core</p>

    <p><a href="https://medium.com/pelith/structure-of-blockchain-daf85e06027e"><strong>轉自Pelith Medium</strong></a>,
作者<a href="https://medium.com/@laijack?source=post_page-----daf85e06027e----------------------">Lai Jack 賴彥廷</a>  <a href="https://medium.com/pelith/structure-of-blockchain-daf85e06027e?source=post_page-----daf85e06027e----------------------">Sep 24</a> · 8 min read</p>

<blockquote>
  <p>收看本系列文章的讀者，應該都對於區塊鏈的基本原理和架構有些概念，如果沒有，推薦您先去 Google 搜尋  <strong>區塊鏈、比特幣、以太坊</strong> 這些關鍵字了解一下。我們將在這些基礎概念之上，來談區塊鏈的技術知識。本系列文章並不會談到太深的技術鑽研，而是希望以 <strong>深入淺出</strong> 的方式讓每一個想要搞懂區塊鏈技術的人都能在讀完後說出： <strong>原來如此！</strong>
本系列文章由區塊鏈技術解決方案開發公司： <strong>Pelith</strong>  編撰。內容皆經過諸位區塊鏈資深研究員及開發者 <strong>校對與驗證</strong> ，盡可能確保 <strong>內容正確無誤</strong> ，讓讀者能安心吸收 <strong>正確的區塊鏈技術知識</strong> 。</p>
</blockquote>

<p><a href="https://medium.com/pelith/behindtheethtransaction-534dc6ce123e"> <strong>上一節</strong> </a> 中，我們在介紹以太坊交易打包規則時帶大家大致了解區塊鏈運作的架構，不過有些技術細節我們沒有完整地交代清楚，本篇及未來數篇文我們將更深入且完整地介紹區塊鏈技術架構，並且帶大家認識目前區塊鏈遇到的各種問題及許多專案在嘗試解決的部分！</p>

<p>廢話不多說，我們先從中本聰設計的初代區塊鏈  <strong>比特幣 Bitcoin</strong>  來談起：</p>

<h1 id="how-bitcoin-blockchain-work">How Bitcoin Blockchain Work</h1>

<p>如果<a href="https://medium.com/pelith/tagged/course">前面幾節</a>大家有認真看的話，應該還記得比特幣是採用  <strong>UTXO 架構</strong> 。</p>

<p>我們從比特幣一筆交易的一生帶大家來一探究竟區塊鏈是如何運作的：</p>

<p><strong>比特幣交易流程示意圖 :</strong>
<img src="https://miro.medium.com/max/4608/1*VcLpDWRuh5LkZfE_g2ffgA.png" alt="" /></p>

<h2 id="比特幣交易的一生">比特幣交易的一生</h2>

<ol>
  <li>一個使用者欲發起一筆交易。</li>
  <li>透過 <strong>錢包</strong> （管理私鑰的工具）輸入交易資訊
（To, Amount, 手續費, OP_Return …）。</li>
  <li>以 <strong>私鑰</strong> 簽署交易。</li>
  <li>廣播 <strong>「加上簽名的交易封包」</strong> 至鄰近的比特幣節點們。</li>
  <li>節點接收到新交易時，會先至 UTXO Pool  <strong>檢查交易發起地址是否能動用足額 UTXO</strong> ，若無則該交易會即刻被丟棄。
＊註：圖中以一個 Balance 值來做標註，但其實這個 Balance 可能是多個 UTXO 的集合，Steve 的 18 可能其實是 0.25+10.75+2+5 四個  <strong>錢堆</strong> 。</li>
  <li>若檢查後確認有足額，則該交易會被放入到  <strong>Tx Pool</strong>  中。
（按造 <strong>手續費給的多寡</strong> 由高至低排序）</li>
  <li>等待出塊的同時，各節點會
<strong>A. 廣播接收到的交易</strong>
<strong>B. 接收未在 Tx Pool 內的交易</strong></li>
  <li>礦工節點們（有在用電腦算力找 nonce 值，拼出塊獎勵的節點）會
<strong>撈取手續費較高的交易們來運算並打包成新區塊</strong> ，
用電腦算力計算 nonce 值。
＊註：這邊的  <strong>nonce 值</strong>  跟前面介紹過的  <strong>以太坊地址的 nonce 值</strong>  不同（以太坊有兩個 nonce：一個是挖礦的；一個是地址的交易 <strong>序次</strong> 。）</li>
  <li>成功找到找到 nonce 值，出塊的礦工會獲得 <strong>出塊獎勵</strong> 及該區塊所有打包交易給的 <strong>手續費</strong> 。</li>
  <li>該礦工節點將新的區塊廣播至全世界的其他節點們。</li>
  <li>其他節點 <strong>同步</strong>  &lt;595266 區塊高度（最新的區塊）&gt;、<UTXO Pool="">、<Tx Pool=""> 資料，繼續 **廣播與接收新交易** 。</Tx></UTXO></li>
  <li>礦工節點再從 Tx Pool 中撈取未出塊的交易們（生成 Merkle Root ）運算並打包成新的區塊。</li>
</ol>

<p>以上，便是區塊鏈運作的方式。</p>

<p>不過由於全世界可能每時每刻都有人在發起新的交易，所以以上這些過程都是 24/7/365.25 不斷在  <strong>動態運作中</strong>  的。</p>

<p>光憑上述 12 點其實很難清楚交代許多的技術細節，所以我們將針對幾點再做更進一步的介紹：</p>

<h1 id="3-私鑰簽署數位簽名-digital-signature">(3) 私鑰簽署數位簽名 Digital Signature</h1>

<p><img src="https://miro.medium.com/max/1500/1*PQve_MqgyWFQVAMKngBmqA.jpeg" alt="" /></p>

<p>數位簽名與驗證示意圖（https://zhaohuabing.com/2018/05/12/cryptocurrency_week1_digital_signature/）</p>

<h2 id="為什麼發送交易需要使用私鑰進行簽名">為什麼發送交易需要使用私鑰進行簽名？</h2>

<p>試想一下，若是沒有這樣的機制， <strong>就無法知道交易是不是由地址的主人發出的。</strong> 因此當我發送交易時，必須有機制能證明這個交易是由我本人來發出。我們先來看一段《精通比特幣》的論述：</p>

<blockquote>
  <p><strong>《 精通比特幣（Mastering Bitcoin）第四章 》</strong>
私鑰可用於為交易生成指紋（數位簽名）。這個簽名只能由知道私鑰的人制作。但是， <strong>任何有權訪問公鑰和交易指紋的人都可以使用它們來驗證簽名確實是私鑰的擁有者生成的。</strong> 非對稱加密的這一有用特性使任何人都可以驗證每筆交易的每個簽名，同時確保 <strong>只有私鑰所有者才能生成有效的簽名。</strong></p>
</blockquote>

<p>因此，能唯一證明的機制便是：用我的私鑰生成一個 <strong>「數位簽名」</strong> 後，連同交易內容一起送出。節點接收到這筆加上簽名的交易時，可以用 <strong>我的公鑰</strong> 來驗證這個簽名是由 <strong>我的私鑰</strong> 所簽署的。如此來證明這個交易是由我送出的。</p>

<h1 id="5-utxo-pool">(5) UTXO Pool</h1>

<p>接著，我們來介紹 UTXO Pool：所謂的區塊鏈其實就是自主網上線以來的所有歷史區塊，區塊內包含零至數筆的交易資料。而比特幣至 2019/9 為止的近 60 萬個區塊 資料大小約為 250 GB。</p>

<p>上方第 (5) 點，節點接收交易要檢查時，照理來說應該是要把近 60 萬個區塊資料都爬過一遍才能確認該地址可動用的餘額。然而，這麼做曠日費時，當區塊越來越多，且每一筆交易接收時都要整個掃描一遍時，會因掃描時間過長導致節點之間的同步出現問題。</p>

<p>因此，UTXO Pool 便出現了。作法是： <strong>用資料庫記錄一個掃描過後的最終狀態</strong> ，並在這之上再依據後續區塊做更新變動。亦即 <strong>把已花費的 Output 紀錄都丟棄掉，只保留最後 Unspent 的 Tx Output。</strong> 如此便不用每筆交易接收時都要掃描整條區塊鏈，只要掃描去蕪存菁的 UTXO Pool 就可以了。</p>

<h1 id="10-節點-node">(10) 節點 Node</h1>

<p>了解 UTXO Pool 後，接著來進一步介紹節點。節點是維持區塊鏈網路運作的根基，區塊鏈之所以能做到去中心化，便是因為在全世界有無數的節點在同步與備份所有的區塊資料（全交易歷史紀錄）。</p>

<h2 id="11-節點同步不斷刷新推算">(11) 節點同步（不斷刷新推算）</h2>

<p>當我接收到一筆新的交易並驗證後，放進我的 Tx Pool 中，我會同時把這筆交易廣播給鄰近的節點們。鄰近的節點們驗證、接收並同步後也會再廣播給他們鄰近的節點們，如此將資訊以網狀廣播出去，讓各個節點之間維持一個 <strong>「動態同步」</strong> 的狀態。</p>

<h2 id="12-節點不一定等於礦工"><strong>(12) 節點不一定等於礦工</strong></h2>

<p>節點可以選擇 <strong>要不要進行挖礦</strong> ，也就是說：我可以 <strong>單純的接收、同步與廣播</strong> 「Block、UTXO Pool、Tx Pool」資料，只做帳本更新動作，當個稱職的傳聲筒為去中心化世界做貢獻，不花算力去打包交易、計算 nonce 拼出塊獎勵。</p>

<p>而這些 <strong>節點們</strong> 便是所謂的  <strong>Peer to Peer（P2P）Network</strong>   <strong>「點對點網路」</strong> 。</p>

<p>以上便是核心版的區塊鏈架構，中間有許多的技術細節我們先不深入著墨。因為這是一個由淺入深的系列文，未來會逐一介紹到的！</p>

<h1 id="blockchain-demo">Blockchain Demo</h1>

<p>最後，如果想更了解區塊鏈如何運作的朋友，可以到下方這個網站去逛逛，實際體驗、操作看看區塊鏈是如何運作的！</p>

<p><a href="https://anders.com/blockchain/?source=post_page-----daf85e06027e----------------------">Blockchain Demo</a></p>

<p><em>（</em> <a href="https://anders.com/blockchain/"> <em>https://anders.com/blockchain/</em> </a> <em>）</em></p>

<p>此外，也跟大家預告一下精彩可期的未來數篇文章：</p>

<h2 id="7-以太坊區塊鏈架構-how-ethereum-blockchain-work">&lt;7&gt; 以太坊區塊鏈架構 How Ethereum Blockchain Work</h2>

<p>我們將接續本篇文章，介紹  <strong>區塊鏈 2.0－</strong>  Vitalik 如何在中本聰設計的比特幣架構上進行升級與改動，同時也將首度揭曉 <strong>「以太坊區塊鏈架構圖」</strong> ！</p>

<h2 id="8-區塊鏈技術地圖-blockchain-technical-roadmap">&lt;8&gt; 區塊鏈技術地圖 Blockchain Technical Roadmap</h2>

<p><strong>比特幣資深研究員「陳伯韋」五年多來的研究結晶完全公開！</strong>
我們將依區塊鏈架構清楚剖析目前區塊鏈遇到的各項問題（ <strong>隱私問題、儲存問題、速度問題</strong>  等），並 <strong>摘要介紹目前各個 項目／團隊 針對各項問題提出的解決方案</strong> ！</p>

<h2 id="9-去中心化金融技術解析-how-decentralized-finance-defi-work">&lt;9&gt; 去中心化金融技術解析 How Decentralized Finance (DeFi) Work</h2>

<p>DeFi 正夯，到底在紅什麼呢？DeFi 如何解決傳統金融遇到的界線與問題呢？透過本篇文章將（盡可能）解答您心中的疑問！</p>

</div>

<div class="tags">
    
</div>

                </div>
                
                <div class="column is-4-desktop is-12-tablet">
                    <p class="title is-4">Latest Posts</p>

<div class="columns is-multiline">
    
    <div class="column is-12">
        <div class="card">
    
    <div class="card-image">
        <img src="/img/84.png" alt="Grin 的貨幣政策">
    </div>
    
    <div class="card-content">
        <div class="content">
            
            <a class="title is-4" href="/news/2019/10/21/%E7%BF%BB%E8%AD%AF-Grin%E7%9A%84%E8%B2%A8%E5%B9%A3%E6%94%BF%E7%AD%96/">Grin 的貨幣政策</a>
            
            <p><blockquote>
  <p>本篇文章是翻譯自Grin的<a href="https://github.com/mimblewimble/docs/wiki/Monetary-Policy">Gitgub</a>的內容，在說明Grin為什麼採取當前的發行政策，以前其背後對於比特幣等加密貨幣的思想，以及如何將自己的理解變為Grin中的發行政策。譯者認為加密貨幣的發行政策一直是大家鮮少注意到，卻極為重要的一塊，因此翻譯了這篇文章，簡單而言，<strong>Grin的核心貢獻者認為貨幣能有價值不在於有沒有硬頂，而是能不能有透明的發行政策</strong>。 by <a href="https://www.facebook.com/profile.php?id=100000175076210">Williams Lai</a></p>
</blockquote>

</p>
        </div>
        <div class="has-text-centered">
            <a href="/news/2019/10/21/%E7%BF%BB%E8%AD%AF-Grin%E7%9A%84%E8%B2%A8%E5%B9%A3%E6%94%BF%E7%AD%96/" class="button is-primary">Read more</a>
        </div>
    </div>
    <footer class="card-footer">
        <p class="card-footer-item">Published: Oct 21, 2019</p>
    </footer>
</div>
    </div>
    
    <div class="column is-12">
        <div class="card">
    
    <div class="card-image">
        <img src="/img/50.png" alt="Cypherpunks Taiwan (8) -如何使用github & 衛星計畫進度">
    </div>
    
    <div class="card-content">
        <div class="content">
            
            <a class="title is-4" href="/meetup/2019/10/04/Cypherpunks-Taiwan-(8)-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8github-&-%E8%A1%9B%E6%98%9F%E8%A8%88%E7%95%AB%E9%80%B2%E5%BA%A6%E5%A0%B1%E5%91%8A/">Cypherpunks Taiwan (8) -如何使用github & 衛星計畫進度</a>
            
            <p><p>活動影片：</p>
<ul>
  <li>Cypherpunks 介紹 ： <a href="https://youtu.be/rG7X8pOZ_as?t=1">youtube</a></li>
  <li>如何使用github ： <a href="https://youtu.be/rG7X8pOZ_as?t=1169">youtube</a>, <a href="/meetup/2019/10/04/Cypherpunks-GitHub-教學演講/">文章</a></li>
  <li>比特幣衛星計畫運作與計畫進度 ： <a href="https://youtu.be/rG7X8pOZ_as?t=3934">youtube</a></li>
</ul>

</p>
        </div>
        <div class="has-text-centered">
            <a href="/meetup/2019/10/04/Cypherpunks-Taiwan-(8)-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8github-&-%E8%A1%9B%E6%98%9F%E8%A8%88%E7%95%AB%E9%80%B2%E5%BA%A6%E5%A0%B1%E5%91%8A/" class="button is-primary">Read more</a>
        </div>
    </div>
    <footer class="card-footer">
        <p class="card-footer-item">Published: Oct 4, 2019</p>
    </footer>
</div>
    </div>
    
    <div class="column is-12">
        <div class="card">
    
    <div class="card-image">
        <img src="/img/75.png" alt="Cypherpunks GitHub 教學演講">
    </div>
    
    <div class="card-content">
        <div class="content">
            
            <a class="title is-4" href="/meetup/2019/10/04/Cypherpunks-GitHub-%E6%95%99%E5%AD%B8%E6%BC%94%E8%AC%9B/">Cypherpunks GitHub 教學演講</a>
            
            <p><p>GitHub 可以說是現今時代中工程師的一種社交網路, 當你發現原始作者有一些感興趣的專案時，你想為此專案作貢獻，加入原作者專案 Contributor 的行列時。就可以參考本文件一步一步操作。</p>

</p>
        </div>
        <div class="has-text-centered">
            <a href="/meetup/2019/10/04/Cypherpunks-GitHub-%E6%95%99%E5%AD%B8%E6%BC%94%E8%AC%9B/" class="button is-primary">Read more</a>
        </div>
    </div>
    <footer class="card-footer">
        <p class="card-footer-item">Published: Oct 4, 2019</p>
    </footer>
</div>
    </div>
    
</div>




                </div>
                
            </div>
        </div>
    </section>
    
        <footer class="footer">
    <div class="container">
        
        
        <div class="columns is-multiline">
            
            <div class="column has-text-centered">
                <div>
                    <a href="/" class="link">Home</a>
                </div>
            </div>
            
            <div class="column has-text-centered">
                <div>
                    <a href="/blog/" class="link">Blog</a>
                </div>
            </div>
            
            <div class="column has-text-centered">
                <div>
                    <a href="/markdown/products/" class="link">書架</a>
                </div>
            </div>
            
            <div class="column has-text-centered">
                <div>
                    <a href="/markdown/about/" class="link">關於我們</a>
                </div>
            </div>
            
            <div class="column has-text-centered">
                <div>
                    <a href="https://github.com/cypherpunks-core" class="link">Github</a>
                </div>
            </div>
            
        </div>
        

        <div class="content is-small has-text-centered">
            <p class=""> Powered by  <a href="https://cypherpunks-core.github.io"> Cypherpunks Core </a></p>
        </div>
    </div>
</footer>

    
    <script src="/assets/js/app.js" type="text/javascript"></script><!-- footer scripts --></body>
</html>

