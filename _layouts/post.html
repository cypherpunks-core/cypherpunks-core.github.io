---
layout: default
hide_hero: true
show_sidebar: false
---

<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <!-- Post Header -->
  <header class="mb-8">
    <!-- Category Badge -->
    {% if page.category %}
    <a href="{{ '/categories/' | relative_url }}#{{ page.category | slugify }}" class="inline-block px-3 py-1 text-xs font-mono bg-cp-green-500/10 text-cp-green-500 border border-cp-green-600 rounded mb-4 hover:bg-cp-green-500/20 transition-colors">
      {{ page.category }}
    </a>
    {% endif %}

    <!-- Title -->
    <h1 class="text-3xl md:text-4xl font-bold font-mono text-cp-green-500 mb-4 text-glow-sm" itemprop="headline">
      {{ page.title }}
    </h1>

    <!-- Meta Info -->
    <div class="flex flex-wrap items-center gap-4 text-sm text-cp-dark-600 font-mono">
      <!-- Date -->
      <time datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished" class="flex items-center gap-1">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
        </svg>
        {{ page.date | date: "%Y-%m-%d" }}
      </time>

      <!-- Author -->
      <span class="flex items-center gap-1" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
        </svg>
        <span itemprop="name">{{ page.author | default: site.author.name }}</span>
      </span>

      <!-- Reading Time -->
      {% if site.reading_time.enabled %}
      {% assign words = content | number_of_words %}
      {% assign reading_time = words | divided_by: site.reading_time.words_per_minute %}
      {% if reading_time < 1 %}{% assign reading_time = 1 %}{% endif %}
      <span class="flex items-center gap-1">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        {{ reading_time }} 分鐘閱讀
      </span>
      {% endif %}
    </div>
  </header>

  <!-- Featured Image -->
  {% if page.image and page.show_image != false %}
  <figure class="mb-8 rounded-lg overflow-hidden border border-cp-dark-400">
    <img
      src="{{ page.image | relative_url }}"
      alt="{{ page.title }}"
      class="w-full h-auto"
      loading="lazy"
      itemprop="image"
    >
  </figure>
  {% endif %}

  <!-- Post Content with TOC -->
  <div class="flex flex-col lg:flex-row gap-8">
    <!-- Main Content -->
    <div class="flex-grow min-w-0">
      <div class="content prose prose-invert max-w-none" itemprop="articleBody">
        {{ content }}
      </div>

      <!-- Tags -->
      {% if page.tags and page.tags.size > 0 %}
      <div class="mt-8 pt-8 border-t border-cp-dark-400">
        <h3 class="text-sm font-mono text-cp-dark-600 mb-3">
          <span class="text-cp-green-600">#</span> 標籤
        </h3>
        <div class="flex flex-wrap gap-2">
          {% for tag in page.tags %}
          <a href="{{ '/tags/' | relative_url }}#{{ tag | slugify }}" class="tag text-xs px-3 py-1 bg-cp-dark-200 text-cp-green-500 border border-cp-dark-400 rounded font-mono hover:border-cp-green-500 hover:bg-cp-green-500/10 transition-all">
            {{ tag }}
          </a>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- Share Buttons -->
      {% if page.show_share != false %}
      <div class="mt-8 pt-8 border-t border-cp-dark-400">
        <h3 class="text-sm font-mono text-cp-dark-600 mb-3">
          <span class="text-cp-green-600">//</span> 分享
        </h3>
        {% include share-buttons.html %}
      </div>
      {% endif %}

      <!-- Author Bio -->
      <div class="mt-8 pt-8 border-t border-cp-dark-400">
        <div class="flex items-center gap-4 p-4 bg-cp-dark-100 border border-cp-dark-400 rounded-lg">
          <div class="w-12 h-12 rounded-full bg-cp-green-500/20 flex items-center justify-center text-cp-green-500 font-mono font-bold">
            CP
          </div>
          <div>
            <h4 class="font-mono font-medium text-cp-dark-800">{{ page.author | default: site.author.name }}</h4>
            <p class="text-sm text-cp-dark-600">{{ site.description | truncate: 80 }}</p>
          </div>
        </div>
      </div>

      <!-- Related Posts -->
      {% if page.tags.size > 0 %}
      {% assign related_posts = site.posts | where_exp: "post", "post.url != page.url" %}
      {% assign related_by_tags = "" | split: "" %}
      {% for post in related_posts %}
        {% for tag in page.tags %}
          {% if post.tags contains tag %}
            {% assign related_by_tags = related_by_tags | push: post %}
            {% break %}
          {% endif %}
        {% endfor %}
      {% endfor %}
      {% assign related_posts = related_by_tags | uniq | slice: 0, 3 %}

      {% if related_posts.size > 0 %}
      <div class="mt-8 pt-8 border-t border-cp-dark-400">
        <h3 class="text-lg font-mono font-bold text-cp-green-500 mb-4">
          <span class="text-cp-dark-600">//</span> 相關文章
        </h3>
        <div class="grid gap-4">
          {% for post in related_posts %}
          <a href="{{ post.url | relative_url }}" class="block p-4 bg-cp-dark-100 border border-cp-dark-400 rounded-lg hover:border-cp-green-600 hover:bg-cp-dark-200 transition-all group">
            <h4 class="font-medium text-cp-dark-800 group-hover:text-cp-green-500 transition-colors">
              {{ post.title }}
            </h4>
            <time class="text-xs text-cp-dark-600 font-mono mt-1 block">
              {{ post.date | date: "%Y-%m-%d" }}
            </time>
          </a>
          {% endfor %}
        </div>
      </div>
      {% endif %}
      {% endif %}

      <!-- Comments -->
      {% if page.show_comments != false and site.comments.provider %}
      <div class="mt-8 pt-8 border-t border-cp-dark-400">
        <h3 class="text-lg font-mono font-bold text-cp-green-500 mb-4">
          <span class="text-cp-dark-600">//</span> 留言
        </h3>
        {% include comments.html %}
      </div>
      {% endif %}
    </div>

    <!-- TOC Sidebar -->
    {% if page.show_toc != false %}
    <aside class="hidden xl:block w-64 flex-shrink-0">
      <div class="sticky top-24">
        {% include toc.html %}
      </div>
    </aside>
    {% endif %}
  </div>

  <!-- Post Navigation -->
  <nav class="mt-12 pt-8 border-t border-cp-dark-400">
    <div class="flex flex-col sm:flex-row justify-between gap-4">
      {% if page.previous.url %}
      <a href="{{ page.previous.url | relative_url }}" class="flex-1 p-4 bg-cp-dark-100 border border-cp-dark-400 rounded-lg hover:border-cp-green-600 transition-all group">
        <span class="text-xs text-cp-dark-600 font-mono block mb-1">← 上一篇</span>
        <span class="text-cp-dark-800 group-hover:text-cp-green-500 transition-colors line-clamp-1">{{ page.previous.title }}</span>
      </a>
      {% else %}
      <div class="flex-1"></div>
      {% endif %}

      {% if page.next.url %}
      <a href="{{ page.next.url | relative_url }}" class="flex-1 p-4 bg-cp-dark-100 border border-cp-dark-400 rounded-lg hover:border-cp-green-600 transition-all group text-right">
        <span class="text-xs text-cp-dark-600 font-mono block mb-1">下一篇 →</span>
        <span class="text-cp-dark-800 group-hover:text-cp-green-500 transition-colors line-clamp-1">{{ page.next.title }}</span>
      </a>
      {% endif %}
    </div>
  </nav>
</article>
